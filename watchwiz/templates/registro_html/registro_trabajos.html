{% extends 'base.html' %}

{% block title %}Registrar Trabajo{% endblock title %}

{% block content %}
<div class="centro">
    <!-- Formulario para registrar trabajo -->
    <form class="formularioG" method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="inputsR1">
            <div class="half">
                <!-- Nombre del cliente -->
                <label for="{{form.client_name.id_for_label}}">
                    Cliente:
                </label>
                <!-- input del nombre -->
                {{form.client_name}}
            </div>
            <div class="half">
                <!-- Teléfono del cliente -->
                <label for="{{form.phone_number.id_for_label}}">
                    Teléfono:
                </label>
                {{form.phone_number}}
            </div>
            <div>
                <!-- Descripción del trabajo -->
                <label for="{{form.description.id_for_label}}">
                    Descripción:
                </label>
                {{form.description}}
            </div>
        </div>
        <!-- div de los pagos y anticipos -->
        <div class="dinero">
            <span>$ Servicio</span>
            <!-- Cantidad del precio -->
            <div>
                <label for="{{form.service_cost.id_for_label}}">
                    Precio:
                </label>
                {{form.service_cost}}
                <label for="{{form.advance.id_for_label}}">
                    Anticipo:
                </label>
                {{form.advance}}
                <label for="restante">
                    Restante:
                </label>
                <input type="number" name="restante" id="restante">
            </div>
        </div>
        <!-- Input para la imagen -->
        <label for="{{form.imagen.id_for_label}}">
            <div class="icon">
                <i class="fa-regular fa-images"></i>
            </div>
            <span>Sube la imagen del trabajo</span>
            <img src="#" alt="Vista previa de la imagen" id="preview" style="display: none; width: 100%; height: 100%;">
        </label>
        {{form.imagen}}
        <!-- Inputs para las fechas -->
        <div class="fechas">
            <div class="half">
                <label for="{{form.received_date.id_for_label}}">
                    Fecha de recibido:
                </label>
                {{form.received_date}}
            </div>
            <div class="half">
                <label for="{{form.review_date.id_for_label}}">
                    Fecha de revisión:
                </label>
                {{form.review_date}}
            </div>
        </div>
        <!-- Botones para aceptar o cancelar -->
        <div class="btn-form">
            <button class="cancelar" type="button" onclick="window.location.href='{% url 'home' %}'">Cancelar</button>
            <button class="aceptar" type="submit">Registrar Trabajo</button>
        </div>
        
    </form>
</div>
{% endblock %}

<!-- Incluye el script de Flatpickr -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script>
    // Activar el Flatpickr para los campos de fecha
    flatpickr("#received_date", {
        minDate: "today", // La fecha mínima será hoy
        dateFormat: "Y-m-d", // El formato de fecha que queremos guardar
    });

    flatpickr("#review_date", {
        minDate: "today", // La fecha mínima será hoy
        dateFormat: "Y-m-d", // El formato de fecha que queremos guardar
    });
</script>
